services:
  prefect:
    container_name: prefectserver
    image: prefecthq/prefect:3-latest
    ports:
      - "4200:4200"
    command: ["prefect", "server", "start", "--host", "0.0.0.0"]
    volumes:
      - prefect_data:/root/.prefect

  n8n:
    container_name: n8nserver
    image: docker.n8n.io/n8nio/n8n
    environment:
      - GENERIC_TIMEZONE="Australia/Melbourne"
      - TZ="Australia/Melbourne"
      - N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=true
      - N8N_RUNNERS_ENABLED=true
    volumes:
      - n8n_data:/home/node/.n8n
    ports:
      - "5678:5678"

volumes:
  prefect_data: {}
  n8n_data: {}
